<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>Simón Wilson Music</title>
		<link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,700" rel="stylesheet">
		<link rel="stylesheet" href="../css/main.css">
		<link rel="stylesheet" href="../css/credits.css">
	</head>
	<body>
		<div class="header"><span class="title"><a href="/">Sim&#0243;n Wilson</a></span><span class="subtitle"><a href="/">Composer &#0149; Arranger</a></span>
		</div>
		<div class="top-container">
			<div class="empty-spacer"></div>
			<h1>Credits</h1>
			<div class="ul-container">
			</div>
		</div>
		<script>
		function getCredits() {
			let url = "https://simonwilsonmusic.com/api/v1/credits";
			let param = {
				method: "GET"
			};
			fetch(url, param).then(response => {
				let textPromise = response.text();
				textPromise.then(parseString);
			});
		}

		function parseString(creditsSource) {
			let sourceArr = creditsSource.split('\n');
			let container = document.querySelector('.ul-container');
			let runningContent = newCreditsUL();
			sourceArr.map(e => {
				let content = document.createElement('li');
				if(e.match(/\*\*/)) {
					content = document.createElement('li');
					content.innerText = e.substr(2);
					content.setAttribute('type', 'disc');
				}else if(e.match(/\*/)) {
					content = document.createElement('li');
					content.setAttribute('type', 'circle');
					let strArr = e.substr(1).split(' – ');
					let leftHalf = document.createElement('i');
					leftHalf.innerText = strArr[0];
					let rightHalf = document.createElement('span');
					rightHalf.innerText = ' - ' + strArr[1];
					content.appendChild(leftHalf);
					content.appendChild(rightHalf);
				}else {
					content = document.createElement('br');
				}
				runningContent.appendChild(content);
			});
			container.appendChild(runningContent);
			function newCreditsUL(){
				let div = document.createElement('ul');
				div.classList.add('credits-section');
				return div;
			}
		}
		getCredits();
		</script>
	</body>
</html>
